<!DOCTYPE html>
{% load static %}
{% load pwa %}
{% load l10n %}

{% localize off %}
{% csrf_token %}

<html lang="es-CO">

  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />

    <!--
      CSS
    -->
    <!-- JqueryUI -->
    <link rel="stylesheet" href="//code.jquery.com/ui/1.13.1/themes/base/jquery-ui.css">
    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
      integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous" />
    <!-- Font awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css"
      integrity="sha512-1PKOgIY59xJ8Co8+NE6FZ+LOAZKjy+KY8iq0G4B3CyeY6wYHN3yt9PW0XpSriVlkMXe40PTKnXrLnZ9+fkDaog=="
      crossorigin="anonymous" />
    <!-- Sidebar -->
    <link rel="stylesheet" href="{% static 'seguimientolite_mazda_col/css/sidebar.css' %}" />
    <!-- Filepond -->
    <link href="https://unpkg.com/filepond/dist/filepond.css" rel="stylesheet" />
    <!-- Datatables -->
    <link rel="stylesheet" type="text/css"
      href="https://cdn.datatables.net/v/bs4/dt-1.10.20/r-2.2.3/datatables.min.css" />
    <!-- Neutron style -->
    <link rel="stylesheet" type="text/css" href="{% static 'seguimientolite_mazda_col/css/neutron.css' %}" />
    <!-- Lightgallery -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.9.0/dist/css/lightgallery.min.css" />

    <style>
      @font-face {
        font-family: "MazdaType";
        src: url({% static 'seguimientolite_mazda_col/fonts/MazdaType-Medium.otf' %});
      }

      * {
        font-family: "MazdaType";
      }

      .custom-control-input:checked~.custom-control-label.green::before {
        color: #7AB957 !important;
        border-color: #7AB957 !important;
        background-color: #7AB957 !important;
      }

      .custom-control-input:checked~.custom-control-label.yellow::before {
        color: #B59530 !important;
        border-color: #B59530 !important;
        background-color: #B59530 !important;
      }

      .custom-control-input:checked~.custom-control-label.red::before {
        color: #8E1C2E !important;
        border-color: #8E1C2E !important;
        background-color: #8E1C2E !important;
      }

      .custom-control-input:checked~.custom-control-label.blue::before {
        color: #5AA8DD !important;
        border-color: #5AA8DD !important;
        background-color: #5AA8DD !important;
      }

      .custom-control-label::before,
      .custom-control-label::after {
        width: 42px;
        height: 42px;
      }

      .custom-control-label::before {
        background-color: #F0F0F2 !important;
      }

      .nav-link.active {
        background-color: #8E1C2E !important;
        color: white !important;
      }

      .nav-link {
        color: #8E1C2E !important;
      }

      .badge-warning {
        background-color: #B59530 !important;
      }

      .badge-primary {
        background-color: #5AA8DD !important;
      }

      .badge-danger {
        background-color: #8E1C2E !important;
      }

      .filepond--credits {
        display: none !important;
      }

      .dropdown-item:active {
        background-color: #8E1C2E !important;
        color: white !important;
      }

      .page-link {
        background-color: white !important;
        color: #8E1C2E !important;
        border-color: lightgray !important;
      }

    </style>

    <!--
      Javascript
    -->
    <!-- Javascript cookie -->
    <script src="//cdn.jsdelivr.net/npm/js-cookie@rc"></script>
    <!-- Jquery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <!-- Jquery UI -->
    <script src="https://code.jquery.com/ui/1.13.1/jquery-ui.js"></script>
    <!-- Signaturepad -->
    <script src="https://cdn.jsdelivr.net/npm/signature_pad@2.3.2/dist/signature_pad.min.js"></script>
    <!-- Popper js -->
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
      integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN"
      crossorigin="anonymous"></script>
    <!-- Bootstrap -->
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"
      integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV"
      crossorigin="anonymous"></script>
    <!-- Filepond -->
    <script src="https://unpkg.com/filepond/dist/filepond.js"></script>
    <script src="https://unpkg.com/jquery-filepond/filepond.jquery.js"></script>
    <!-- Datatables -->
    <script type="text/javascript" src="https://cdn.datatables.net/v/bs4/dt-1.10.20/r-2.2.3/datatables.min.js"></script>
    <!-- Lightgallery -->
    <script src="https://cdn.jsdelivr.net/npm/lightgallery@1.9.0/dist/js/lightgallery-all.min.js"></script>
    <!-- Sweet Alert 2 -->
    <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <link href="//cdn.jsdelivr.net/npm/@sweetalert2/themes@5.0.0/bootstrap-4/bootstrap-4.css" rel="stylesheet">
    <!-- Seguimientolite -->
    <script src="{% static 'seguimientolite_mazda_col/js/validacion.js' %}"></script>
    <!-- Filepond server config -->
    <script>
      // PLUGINS
      FilePond.setOptions({
        //STYLE
        className: "shadow",
        //TRANSLATIONS
        labelIdle: "<i class='fas fa-plus'></i> Añadir Evidencia",
        labelFileLoadError: "Error de Red",
        labelFileProcessing: "Cargando Archivo",
        labelFileProcessingComplete: "Carga Completada",
        labelFileProcessingAborted: "Carga Cancelada",
        labelFileProcessingError: "Error de Red",
        labelTapToCancel: "Cancelar",
        labelTapToUndo: "Borrar",
        labelTapToRetry: "Volver a Intentar",

        // OPTIONS
        allowMultiple: true,
        chunkUploads: true,
        chunkSize: 500000,
        server: {
          url: "/fp",
          process: "/process/",
          patch: "/patch/",
          revert: "/revert/",
          load: "/load/",
          fetch: "/fetch/",
          restore: "/restore/",
        },
      });
    </script>

    {% progressive_web_app_meta %}

    <title>Seguimiento en Línea | {{titulo}}</title>

    <style>
      .switch {
        font-size: 1rem;
        position: relative;
      }

      .switch input {
        position: absolute;
        height: 1px;
        width: 1px;
        background: none;
        border: 0;
        clip: rect(0 0 0 0);
        clip-path: inset(50%);
        overflow: hidden;
        padding: 0;
      }

      .switch input+label {
        position: relative;
        min-width: calc(calc(2.375rem * 0.8) * 2);
        border-radius: calc(2.375rem * 0.8);
        height: calc(2.375rem * 0.8);
        line-height: calc(2.375rem * 0.8);
        display: inline-block;
        cursor: pointer;
        outline: none;
        user-select: none;
        vertical-align: middle;
        text-indent: calc(calc(calc(2.375rem * 0.8) * 2) + 0.5rem);
      }

      .switch input+label::before,
      .switch input+label::after {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: calc(calc(2.375rem * 0.8) * 2);
        bottom: 0;
        display: block;
      }

      .switch input+label::before {
        right: 0;
        background-color: #dee2e6;
        border-radius: calc(2.375rem * 0.8);
        transition: 0.2s all;
      }

      .switch input+label::after {
        top: 2px;
        left: 2px;
        width: calc(calc(2.375rem * 0.8) - calc(2px * 2));
        height: calc(calc(2.375rem * 0.8) - calc(2px * 2));
        border-radius: 50%;
        background-color: white;
        transition: 0.2s all;
      }

      .switch input:checked+label::before {
        background-color: #08d;
      }

      .switch input:checked+label::after {
        margin-left: calc(2.375rem * 0.8);
      }

      .switch input:focus+label::before {
        outline: none;
        box-shadow: 0 0 0 0.2rem rgba(0, 136, 221, 0.25);
      }

      .switch input:disabled+label {
        color: #868e96;
        cursor: not-allowed;
      }

      .switch input:disabled+label::before {
        background-color: #e9ecef;
      }

      .switch.switch-sm {
        font-size: 0.875rem;
      }

      .switch.switch-sm input+label {
        min-width: calc(calc(1.9375rem * 0.8) * 2);
        height: calc(1.9375rem * 0.8);
        line-height: calc(1.9375rem * 0.8);
        text-indent: calc(calc(calc(1.9375rem * 0.8) * 2) + 0.5rem);
      }

      .switch.switch-sm input+label::before {
        width: calc(calc(1.9375rem * 0.8) * 2);
      }

      .switch.switch-sm input+label::after {
        width: calc(calc(1.9375rem * 0.8) - calc(2px * 2));
        height: calc(calc(1.9375rem * 0.8) - calc(2px * 2));
      }

      .switch.switch-sm input:checked+label::after {
        margin-left: calc(1.9375rem * 0.8);
      }

      .switch.switch-lg {
        font-size: 1.25rem;
      }

      .switch.switch-lg input+label {
        min-width: calc(calc(3rem * 0.8) * 2);
        height: calc(3rem * 0.8);
        line-height: calc(3rem * 0.8);
        text-indent: calc(calc(calc(3rem * 0.8) * 2) + 0.5rem);
      }

      .switch.switch-lg input+label::before {
        width: calc(calc(3rem * 0.8) * 2);
      }

      .switch.switch-lg input+label::after {
        width: calc(calc(3rem * 0.8) - calc(2px * 2));
        height: calc(calc(3rem * 0.8) - calc(2px * 2));
      }

      .switch.switch-lg input:checked+label::after {
        margin-left: calc(3rem * 0.8);
      }

      .switch+.switch {
        margin-left: 1rem;
      }

      .dropdown-menu {
        margin-top: 0.75rem;
      }

      * {
        font-size: 15px;
      }

    </style>
    {% load webpush_notifications %}
    {% webpush_header %}
  </head>

  <body>
    {% block tecnico-head %}
    <div class="d-flex" id="wrapper">
      <div class="text-dark" id="sidebar-wrapper" style="background-color: white;">
        <div class="sticky-top">
          <div class="sidebar-heading text-break">Bienvenido</div>
          <div class="sidebar-heading text-break">
            <i class="fas fa-user"></i>
            {{ user.get_full_name|lower|title }}
            <p><small>Equipo: {{user.groups.all.0.name|lower|title}}</small></p>
          </div>
          <div class="list-group border-0">
            <a class="list-group-item border-0 text-dark" href="{% url 'cotizaciones' %}">
              <i class="fas fa-money-check-alt"></i>
              Cotizaciones
            </a>

            {% if user.groups.all.0.name == 'administradores' or user.groups.all.0.name == 'jefe de taller' or user.groups.all.0.name == 'asesores' %}
            <a class="list-group-item border-0 text-dark" href="{% url 'ordenes' %}">
              <i class="fas fa-address-card"></i>
              Asesor
            </a>
            {% endif %}

            {% if user.groups.all.0.name == 'administradores' %}
            <a class="list-group-item border-0 text-dark" href="{% url 'historial_cotizaciones' %}">
              <i class="fas fa-history"></i>
              Historial de Autorizaciones
            </a>
            {% endif %}

            <a class="list-group-item border-0 text-dark" href="/chat" style="display: none;">
              <i class="fas fa-comments"></i>
              Chat
            </a>

            {% webpush_button with_class="btn btn-primary" %}

            {% if user.is_authenticated %}
            <a class="list-group-item border-0 text-dark" href="{% url 'logout' %}">
              <i class="fas fa-sign-out-alt"></i>
              Cerrar Sesion
            </a>
            {% endif %}
          </div>
        </div>
      </div>

      <div id="page-content-wrapper">
        {% endblock %}

        {% block navbar %}
        <nav class="navbar navbar-expand-lg navbar-light text-light sticky-top mb-3"
          style="background-color: #F0F0F2 !important;">
          <button class="btn text-dark mr-3" id="menu-toggle"><i class="fas fa-bars"></i></button>
          <div class="d-flex flex-grow-1 text-light">
            <h6 class="navbar-brand"> {{titulo}} </h6>
          </div>
        </nav>
        {% endblock %}

        {% block content %}
        {% endblock %}

        {% block tecnico-foot %}
      </div>
    </div>
    <script>
      $("#menu-toggle").click(function (e) {
        e.preventDefault();
        $("#wrapper").toggleClass("toggled");
      });
    </script>

    <!--LIGHT GALLERY-->
    <script>
      $('.galeria_evidencias').on('click', function () {
        $(this).lightGallery({
          share: false,
          dynamic: true,
          dynamicEl: [
            {% for ev in filas_media %}
              {
            "src": '/media/{{ev.evidencia}}',
            'thumb': '/media/{{ev.evidencia}}',
            'subHtml': '<h4>{{ev.item.item.descripcion}}</h4>'
          },
          {% endfor %}
            {% for ev in filas_video %}
      {
        'html': '<video class="lg-video-object lg-html5" controls preload="none"><source src="/media/{{ev.evidencia}}"></video>',
          'thumb': '/media/{{ev.evidencia}}',
            'subHtml': '<h4>{{ev.item.item.descripcion}}</h4>'
      },
      {% endfor %}
          ]
        })
      });
    </script>

    <script>
      $("#webpush-subscribe-button").text("")
      $("#webpush-subscribe-button").append("<i class='far fa-bell mr-2'></i>");
      $("#webpush-subscribe-button").append("Activar notificaciones");
    </script>
    {% endblock %}
  </body>

</html>
{% endlocalize %}
